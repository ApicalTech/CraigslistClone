@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@model CraigslistClone.Models.ThreadTopicModel

@{
    ViewData["Title"] = "Topic";
}

<h1>Check out all of the @Model.Thread.Name listings!</h1>

<span id="headingbtn">
    @if (Model.Listings.Any() && SignInManager.IsSignedIn(User))
    {
        <a asp-controller="Listing" asp-action="Create" asp-route-id=@Model.Thread.Id class="btn btn-dark"> Create Post </a>
    }
</span>

<body>
    <div class="row" id="forumIndexContent">
        @if (Model.Listings.Any())
        {
            <table class="table table-bordered table-hover">
                <tbody>
                    @foreach (var listing in Model.Listings)
                    {
                        <tr>
                            <td>
                                <a asp-controller="Listing" asp-action="Index" asp-route-id="@listing.Id">
                                    @listing.Title
                                </a>
                            </td>
                            <td>
                                @listing.Author
                            </td>
                            <td>
                                @listing.PostDate
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {

            @if (SignInManager.IsSignedIn(User))
            {
                <div class="noPosts" style="text-align: center;">
                    <p style="display: inline-block;">
                        <br /> It looks like there are no @Model.Thread.Name listings yet. <br />
                        Why not <a asp-controller="Listing" asp-action="Create" asp-route-id="@Model.Thread.Id"><span>Create One?</span></a>
                    </p>
                </div>
            }
            else
            {
                <div class"noPostsSignedOut" style="text-align: center;" >
                    <p>
                        There are no current listings for @Model.Thread.Name please sign in if you would like to create one!
                    </p>
                </div>
            }
        }
    </div>
</body>